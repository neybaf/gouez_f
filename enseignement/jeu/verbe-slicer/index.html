<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verbe Slicer - Version Simple</title>
    <!-- CSS AUTONOME - N√©cessaire car le jeu √©tait perturb√© par le CSS des autres jeux -->
    <!-- Toutes les am√©liorations mobiles sont int√©gr√©es directement ici pour maintenir l'autonomie -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 100%);
            color: white;
            overflow: hidden;
            /* Optimisations mobiles int√©gr√©es */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* AM√âLIORATIONS MOBILES INT√âGR√âES */
        
        /* Optimisations tactiles pour tous les √©l√©ments cliquables */
        button, .game-btn, .difficulty-btn, .ui-btn {
            min-height: 44px; /* Taille recommand√©e Apple/Google pour les √©l√©ments tactiles */
            min-width: 44px;
            touch-action: manipulation; /* √âvite le zoom sur double-tap */
        }
        
        /* Optimisations pour √©crans tactiles */
        @media (pointer: coarse) {
            .game-btn, .difficulty-btn {
                min-height: 48px;
                padding: 12px 24px;
                font-size: 1.1rem;
            }
            
            .ui-btn {
                min-height: 48px;
                min-width: 48px;
                font-size: 1.3rem;
            }
        }
        
        /* Debug styles */
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.9);
            color: #00ff00;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            z-index: 2000;
            max-width: 300px;
            border: 1px solid #333;
        }
        .debug-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            margin: 2px;
            font-size: 11px;
        }
        
        /* √âCRANS DE JEU - DESIGN NOIR */
        .game-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            z-index: 100;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
            color: white;
            overflow: hidden;
        }
        
        .game-screen.active {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        .game-screen.overlay.active {
            display: flex !important;
            align-items: center;
            justify-content: center;
        }
        
        /* √âCRAN DE D√âMARRAGE */
        #start-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: radial-gradient(ellipse at center, #1a1a1a 0%, #000000 100%);
        }
        
        .game-header {
            margin-bottom: 40px;
        }
        
        .game-title {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient 3s ease infinite;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(255, 107, 107, 0.5);
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .title-icon {
            font-size: 3rem;
            margin-right: 20px;
        }
        
        .game-subtitle {
            font-size: 1.5rem;
            color: #888;
            margin-bottom: 30px;
        }
        
        /* BOUTONS */
        .game-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            margin: 10px;
            min-width: 200px;
        }
        
        .game-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .game-btn.primary {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%);
            box-shadow: 0 6px 25px rgba(255, 107, 107, 0.4);
            font-size: 1.3rem;
            padding: 20px 40px;
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 6px 25px rgba(255, 107, 107, 0.4); }
            50% { box-shadow: 0 8px 35px rgba(255, 107, 107, 0.7); }
        }
        
        /* S√âLECTEUR DE DIFFICULT√â */
        .difficulty-selector {
            margin: 30px 0;
        }
        
        .difficulty-selector h3 {
            margin-bottom: 20px;
            color: #ccc;
        }
        
        .difficulty-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .difficulty-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-width: 120px;
        }
        
        .difficulty-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .difficulty-btn.active {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            border-color: #4ecdc4;
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
        }
        
        .difficulty-icon {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 5px;
        }
        
        /* √âCRAN DE JEU */
        #game-screen {
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
        }
        
        .game-ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 200;
        }
        
        .ui-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .score-display, .level-display {
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 25px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .score-value, .level-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #4ecdc4;
        }
        
        .level-name {
            font-size: 0.9rem;
            color: #888;
            display: block;
        }
        
        .lives-display {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .lives-hearts {
            display: flex;
            gap: 5px;
        }
        
        .heart {
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .heart.lost {
            opacity: 0.3;
            filter: grayscale(100%);
        }
        
        .ui-btn {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            pointer-events: all;
        }
        
        #game-canvas {
            width: 100%;
            height: 100%;
            display: block;
            background: transparent;
        }
        
        /* √âCRANS OVERLAY */
        .game-screen.overlay {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
        }
        
        .pause-content, .game-over-content {
            background: rgba(20, 20, 20, 0.95);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.1);
            max-width: 500px;
            width: 90%;
        }
        
        .pause-content h2, .game-over-content h2 {
            margin-bottom: 30px;
            font-size: 2rem;
        }
        
        .pause-stats, .final-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-item, .stat-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stat-label {
            display: block;
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .stat-value {
            display: block;
            color: #4ecdc4;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .stat-icon {
            font-size: 1.2rem;
            margin-right: 8px;
        }
        
        .performance-message {
            background: rgba(78, 205, 196, 0.1);
            border: 1px solid rgba(78, 205, 196, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            color: #4ecdc4;
        }
        
        .pause-buttons, .game-over-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .game-title {
                font-size: 2.5rem;
            }
            
            .difficulty-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .ui-top {
                flex-direction: column;
                gap: 10px;
            }
            
            .pause-content, .game-over-content {
                padding: 20px;
            }
        }
        
        /* BARRE DE PROGRESSION - CSS MANQUANT */
        .progress-container {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            text-align: center;
            z-index: 1000;
        }
        
        .progress-label {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 8px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progressShine 2s infinite;
        }
        
        @keyframes progressShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .progress-text {
            color: #4ecdc4;
            font-size: 0.8rem;
            margin-top: 5px;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        /* Responsive pour la barre de progression */
        @media (max-width: 768px) {
            .progress-container {
                width: 250px;
                bottom: 15px;
            }
            
            .progress-label, .progress-text {
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 480px) {
            .progress-container {
                width: 200px;
                bottom: 10px;
            }
            
            .progress-bar {
                height: 6px;
            }
        }
        
        /* RESPONSIVE BREAKPOINTS INT√âGR√âS */
        @media (max-width: 1024px) {
            .game-title {
                font-size: 3rem;
            }
            
            .difficulty-buttons {
                gap: 15px;
            }
        }
        
        @media (max-width: 768px) {
            .game-title {
                font-size: 2.5rem;
            }
            
            .game-subtitle {
                font-size: 1.2rem;
            }
            
            .difficulty-buttons {
                flex-direction: column;
                align-items: center;
                gap: 12px;
            }
            
            .difficulty-btn {
                min-width: 200px;
                padding: 15px 20px;
            }
            
            .ui-top {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
            }
            
            .score-display, .level-display, .lives-display {
                padding: 8px 16px;
            }
            
            .pause-content, .game-over-content {
                padding: 20px;
                margin: 10px;
            }
            
            .final-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .game-title {
                font-size: 2rem;
            }
            
            .game-subtitle {
                font-size: 1rem;
            }
            
            .game-btn {
                min-width: 180px;
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .ui-top {
                padding: 10px;
            }
            
            .score-display, .level-display, .lives-display {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
            
            .score-value, .level-value {
                font-size: 1.4rem;
            }
            
            .final-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .progress-container {
                width: 200px;
                bottom: 10px;
            }
            
            .progress-bar {
                height: 6px;
            }
        }
        
        /* OPTIMISATIONS ORIENTATION PAYSAGE */
        @media (max-height: 500px) and (orientation: landscape) {
            .game-header {
                margin-bottom: 20px;
            }
            
            .game-title {
                font-size: 1.8rem;
                margin-bottom: 10px;
            }
            
            .game-subtitle {
                font-size: 0.9rem;
                margin-bottom: 15px;
            }
            
            .difficulty-selector {
                margin: 15px 0;
            }
            
            .difficulty-buttons {
                flex-direction: row;
                gap: 10px;
            }
            
            .difficulty-btn {
                min-width: 100px;
                padding: 8px 12px;
                font-size: 0.9rem;
            }
            
            .ui-top {
                padding: 8px 15px;
            }
            
            .progress-container {
                bottom: 5px;
                width: 250px;
            }
        }
        
        /* OPTIMISATIONS √âCRANS HAUTE DENSIT√â */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            body {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            
            .game-title {
                text-rendering: optimizeLegibility;
            }
        }
        
        /* AM√âLIORATIONS ACCESSIBILIT√â MOBILE */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .game-title {
                animation: none;
            }
            
            .game-btn.primary {
                animation: none;
            }
        }
        
        /* OPTIMISATIONS CONTRASTE √âLEV√â */
        @media (prefers-contrast: high) {
            .score-display, .level-display, .lives-display {
                border: 2px solid white;
                background: rgba(0, 0, 0, 0.9);
            }
            
            .game-btn {
                border: 2px solid white;
            }
        }
        
        /* SUPPORT MODE SOMBRE NATIF */
        @media (prefers-color-scheme: dark) {
            :root {
                --text-color: #ffffff;
                --bg-primary: #000000;
                --bg-secondary: #1a1a1a;
            }
        }
        
        /* Debug styles - maintenu pour le d√©veloppement */
        
        /* STYLES LEADERBOARD */
        .leaderboard-content {
            background: rgba(20, 20, 20, 0.95);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.1);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .leaderboard-list {
            margin: 30px 0;
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .leaderboard-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .leaderboard-item.current-player {
            background: rgba(78, 205, 196, 0.2);
            border-color: #4ecdc4;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 10px rgba(78, 205, 196, 0.3); }
            50% { box-shadow: 0 0 20px rgba(78, 205, 196, 0.6); }
        }
        
        .leaderboard-rank {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
            width: 50px;
            text-align: center;
        }
        
        .leaderboard-rank.first { color: #ffd700; }
        .leaderboard-rank.second { color: #c0c0c0; }
        .leaderboard-rank.third { color: #cd7f32; }
        
        .leaderboard-info {
            flex: 1;
            text-align: left;
            margin-left: 20px;
        }
        
        .leaderboard-pseudo {
            font-size: 1.2rem;
            font-weight: bold;
            color: #4ecdc4;
            margin-bottom: 5px;
        }
        
        .leaderboard-details {
            font-size: 0.9rem;
            color: #888;
        }
        
        .leaderboard-score {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ff6b6b;
            text-align: right;
            min-width: 80px;
        }
        
        .leaderboard-input {
            background: rgba(78, 205, 196, 0.1);
            border: 1px solid rgba(78, 205, 196, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .leaderboard-input h3 {
            color: #4ecdc4;
            margin-bottom: 15px;
        }
        
        .leaderboard-input input {
            width: 100%;
            max-width: 300px;
            padding: 10px 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .leaderboard-input input:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
        }
        
        .leaderboard-input input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .leaderboard-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        /* STYLES ONGLETS MENU PAUSE */
        .pause-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .tab-btn {
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        
        .tab-btn:hover {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .tab-btn.active {
            color: #4ecdc4;
            border-bottom-color: #4ecdc4;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .game-rules {
            text-align: left;
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .game-rules h3 {
            color: #4ecdc4;
            margin-bottom: 10px;
            margin-top: 20px;
        }
        
        .game-rules h3:first-child {
            margin-top: 0;
        }
        
        .game-rules p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .game-rules ul {
            margin-bottom: 15px;
            padding-left: 20px;
        }
        
        .game-rules li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .level-info {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .level-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: rgba(78, 205, 196, 0.2);
            color: #4ecdc4;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
            border: 1px solid rgba(78, 205, 196, 0.3);
        }
        
        /* RESPONSIVE POUR LEADERBOARD */
        @media (max-width: 768px) {
            .leaderboard-content {
                padding: 20px;
                max-width: 95%;
            }
            
            .leaderboard-item {
                flex-direction: column;
                text-align: center;
                padding: 15px;
            }
            
            .leaderboard-info {
                margin: 10px 0;
                text-align: center;
            }
            
            .leaderboard-score {
                text-align: center;
                margin-top: 5px;
            }
            
            .pause-tabs {
                flex-direction: column;
                gap: 5px;
            }
            
            .game-rules {
                max-height: 300px;
                padding: 15px;
            }
            
            .level-info {
                flex-direction: column;
                gap: 5px;
            }
        }
        
        @media (max-width: 480px) {
            .leaderboard-content {
                padding: 15px;
            }
            
            .leaderboard-item {
                padding: 10px;
            }
            
            .leaderboard-pseudo {
                font-size: 1rem;
            }
            
            .leaderboard-score {
                font-size: 1.2rem;
            }
            
            .game-rules {
                max-height: 250px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- √âcran de d√©marrage -->
    <div id="start-screen" class="game-screen active">
        <div class="game-header">
            <h1 class="game-title">
                <span class="title-icon">‚öîÔ∏è</span>
                Verbe Slicer
            </h1>
            <p class="game-subtitle">Ma√Ætrisez les verbes irr√©guliers fran√ßais !</p>
        </div>

        <div style="color: white; text-align: center; margin: 20px;">
            <p>üéØ <strong>Objectif :</strong> Cliquez sur les verbes irr√©guliers qui tombent</p>
            <p>‚ö° <strong>Contr√¥les :</strong> Clic pour trancher, Espace pour pause</p>
            <p>üìà <strong>Progression :</strong> 5 niveaux de difficult√© croissante</p>
        </div>

        <div class="difficulty-selector">
            <h3>Choisissez votre difficult√© :</h3>
            <div class="difficulty-buttons">
                <button class="difficulty-btn" data-difficulty="facile">
                    <span class="difficulty-icon">üå±</span>
                    <span class="difficulty-name">Facile</span>
                </button>
                <button class="difficulty-btn active" data-difficulty="normal">
                    <span class="difficulty-icon">‚ö°</span>
                    <span class="difficulty-name">Normal</span>
                </button>
                <button class="difficulty-btn" data-difficulty="difficile">
                    <span class="difficulty-icon">üî•</span>
                    <span class="difficulty-name">Difficile</span>
                </button>
            </div>
        </div>

        <button id="start-game-btn" class="game-btn primary">
            <span class="btn-icon">üöÄ</span>
            Commencer l'aventure
        </button>
        
        <button id="main-leaderboard-btn" class="game-btn secondary">
            <span class="btn-icon">üèÜ</span>
            Voir le classement
        </button>
    </div>

    <!-- √âcran de jeu -->
    <div id="game-screen" class="game-screen">
        <div class="game-ui">
            <div class="ui-top">
                <div class="score-display">
                    <span class="score-label">Score</span>
                    <span id="score" class="score-value">0</span>
                </div>
                
                <div class="level-display">
                    <span class="level-label">Niveau</span>
                    <span id="level" class="level-value">1</span>
                    <span id="level-name" class="level-name">Infinitifs</span>
                </div>

                <div class="lives-display">
                    <span class="lives-label">Vies</span>
                    <div id="lives" class="lives-hearts">
                        <span class="heart">‚ù§Ô∏è</span>
                        <span class="heart">‚ù§Ô∏è</span>
                        <span class="heart">‚ù§Ô∏è</span>
                        <span class="heart">‚ù§Ô∏è</span>
                        <span class="heart">‚ù§Ô∏è</span>
                    </div>
                </div>

                <button id="pause-btn" class="ui-btn">‚è∏Ô∏è</button>
            </div>

            <div class="ui-bottom">
                <div class="progress-container">
                    <div class="progress-label">Progression vers le niveau suivant</div>
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <div id="progress-text" class="progress-text">0 / 25</div>
                </div>
            </div>
        </div>

        <canvas id="game-canvas"></canvas>
        <div id="particles-container"></div>
        <div id="floating-texts"></div>
    </div>

    <!-- √âcran de pause -->
    <div id="pause-screen" class="game-screen overlay">
        <div class="pause-content">
            <h2>‚è∏Ô∏è Jeu en pause</h2>
            
            <!-- Onglets -->
            <div class="pause-tabs">
                <button id="stats-tab" class="tab-btn active" data-tab="stats">üìä Statistiques</button>
                <button id="rules-tab" class="tab-btn" data-tab="rules">üìã R√®gles du jeu</button>
            </div>
            
            <!-- Contenu des statistiques -->
            <div id="stats-content" class="tab-content active">
                <div class="pause-stats">
                    <div class="stat-item">
                        <span class="stat-label">Score actuel</span>
                        <span id="pause-score" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Niveau</span>
                        <span id="pause-level" class="stat-value">1</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Pr√©cision</span>
                        <span id="pause-accuracy" class="stat-value">100%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Progression</span>
                        <span id="pause-progress" class="stat-value">0%</span>
                        <span id="pause-progress-text" class="stat-label">0 / 25</span>
                    </div>
                </div>
            </div>
            
            <!-- Contenu des r√®gles -->
            <div id="rules-content" class="tab-content">
                <div class="game-rules">
                    <h3>üéØ Objectif du jeu</h3>
                    <p>Cliquez <strong>uniquement</strong> sur les verbes irr√©guliers qui tombent pour marquer des points.</p>
                    
                    <h3>üìú R√®gles</h3>
                    <ul>
                        <li>‚úÖ <strong>Bon clic</strong> : Verbe irr√©gulier ‚Üí +1 point + r√©cup√©ration de vie</li>
                        <li>‚ùå <strong>Mauvais clic</strong> : Verbe r√©gulier ‚Üí -1 vie</li>
                        <li>üíî <strong>Verbe rat√©</strong> : Verbe irr√©gulier qui tombe ‚Üí -1 vie</li>
                    </ul>
                    
                    <h3>üéÆ Contr√¥les</h3>
                    <ul>
                        <li>üñ±Ô∏è <strong>Clic</strong> : Trancher un verbe</li>
                        <li>‚è∏Ô∏è <strong>Espace</strong> : Mettre en pause</li>
                        <li>üîÑ <strong>R</strong> : Red√©marrer</li>
                    </ul>
                    
                    <h3>üìà Progression</h3>
                    <p>Progressez √† travers 6 niveaux :</p>
                    <div class="level-info">
                        <span class="level-badge">1</span> Infinitifs
                        <span class="level-badge">2</span> Participes pass√©s
                        <span class="level-badge">3</span> Futur
                        <span class="level-badge">4</span> Imparfait
                        <span class="level-badge">5</span> Subjonctif
                        <span class="level-badge">6</span> Conditionnel
                    </div>
                </div>
            </div>
            
            <div class="pause-buttons">
                <button id="resume-btn" class="game-btn primary">
                    <span class="btn-icon">‚ñ∂Ô∏è</span>
                    Reprendre
                </button>
                <button id="restart-btn" class="game-btn secondary">
                    <span class="btn-icon">üîÑ</span>
                    Red√©marrer
                </button>
                <button id="quit-btn" class="game-btn">
                    <span class="btn-icon">üè†</span>
                    Quitter
                </button>
                <button id="menu-games-btn" class="game-btn">
                    <span class="btn-icon">üéÆ</span>
                    Menu des jeux
                </button>
            </div>
        </div>
    </div>

    <!-- √âcran de fin -->
    <div id="game-over-screen" class="game-screen overlay">
        <div class="game-over-content">
            <h2 id="game-over-title">üéØ Partie termin√©e !</h2>
            
            <div class="final-stats">
                <div class="stat-card">
                    <span class="stat-icon">üèÜ</span>
                    <span class="stat-label">Score final</span>
                    <span id="final-score" class="stat-value">0</span>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">üìä</span>
                    <span class="stat-label">Niveau atteint</span>
                    <span id="final-level" class="stat-value">1</span>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">üéØ</span>
                    <span class="stat-label">Pr√©cision</span>
                    <span id="final-accuracy" class="stat-value">100%</span>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">‚öîÔ∏è</span>
                    <span class="stat-label">Verbes tranch√©s</span>
                    <span id="verbs-sliced" class="stat-value">0</span>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">‚è±Ô∏è</span>
                    <span class="stat-label">Temps de jeu</span>
                    <span id="game-time" class="stat-value">0:00</span>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">üî•</span>
                    <span class="stat-label">Meilleure s√©rie</span>
                    <span id="best-streak" class="stat-value">0</span>
                </div>
            </div>

            <div id="performance-message" class="performance-message"></div>

            <!-- Saisie du pseudo pour le leaderboard -->
            <div id="leaderboard-input" class="leaderboard-input" style="display: none;">
                <h3>üéâ Nouveau record ! Entrez votre pseudo :</h3>
                <input type="text" id="player-pseudo" placeholder="Votre pseudo..." maxlength="15">
                <button id="save-score-btn" class="game-btn primary">
                    <span class="btn-icon">üíæ</span>
                    Enregistrer
                </button>
            </div>

            <div class="game-over-buttons">
                <button id="play-again-btn" class="game-btn primary">
                    <span class="btn-icon">üîÑ</span>
                    Rejouer
                </button>
                <button id="leaderboard-btn" class="game-btn secondary">
                    <span class="btn-icon">üèÜ</span>
                    Classement
                </button>
                <button id="back-to-menu-btn" class="game-btn secondary">
                    <span class="btn-icon">üè†</span>
                    Menu principal
                </button>
            </div>
        </div>
    </div>

    <!-- √âcran de leaderboard -->
    <div id="leaderboard-screen" class="game-screen overlay">
        <div class="leaderboard-content">
            <h2>üèÜ Classement des Ma√Ætres Verbes</h2>
            
            <div id="leaderboard-list" class="leaderboard-list">
                <!-- Les scores seront charg√©s dynamiquement -->
            </div>

            <div class="leaderboard-buttons">
                <button id="close-leaderboard-btn" class="game-btn secondary">
                    <span class="btn-icon">üîô</span>
                    Retour
                </button>
            </div>
        </div>
    </div>

    <script>
        // Version modifi√©e du jeu qui force les donn√©es fallback
        class VerbeSlicerSimple {
            constructor() {
                console.log('üéÆ Initialisation Verbe Slicer Simple...');
                
                this.canvas = null;
                this.ctx = null;
                this.gameState = 'menu';
                this.difficulty = 'normal';
                
                // FORCE les donn√©es int√©gr√©es imm√©diatement - BASE ENRICHIE
                this.verbesData = {
                    verbesIrreguliers: {
                        infinitif: [
                            '√™tre', 'avoir', 'aller', 'faire', 'dire', 'pouvoir', 'voir', 'savoir', 
                            'vouloir', 'venir', 'prendre', 'mettre', 'devoir', 'partir', 'tenir',
                            'sortir', 'sentir', 'vivre', 'mourir', 'ouvrir', 'suivre', 'courir',
                            'servir', 'dormir', 'mentir', 'croire', 'boire', 'lire', '√©crire', 'conna√Ætre'
                        ],
                        participe_passe: [
                            '√©t√©', 'eu', 'all√©', 'fait', 'dit', 'pu', 'vu', 'su', 
                            'voulu', 'venu', 'pris', 'mis', 'd√ª', 'parti', 'tenu',
                            'sorti', 'senti', 'v√©cu', 'mort', 'ouvert', 'suivi', 'couru',
                            'servi', 'dormi', 'menti', 'cru', 'bu', 'lu', '√©crit', 'connu'
                        ],
                        futur: [
                            'serai', 'aurai', 'irai', 'ferai', 'dirai', 'pourrai', 'verrai', 'saurai', 
                            'voudrai', 'viendrai', 'prendrai', 'mettrai', 'devrai', 'partirai', 'tiendrai',
                            'sortirai', 'sentirai', 'vivrai', 'mourrai', 'ouvrirai', 'suivrai', 'courrai',
                            'servirai', 'dormirai', 'mentirai', 'croirai', 'boirai', 'lirai', '√©crirai', 'conna√Ætrai'
                        ],
                        imparfait: [
                            '√©tais', 'avais', 'allais', 'faisais', 'disais', 'pouvais', 'voyais', 'savais', 
                            'voulais', 'venais', 'prenais', 'mettais', 'devais', 'partais', 'tenais',
                            'sortais', 'sentais', 'vivais', 'mourais', 'ouvrais', 'suivais', 'courais',
                            'servais', 'dormais', 'mentais', 'croyais', 'buvais', 'lisais', '√©crivais', 'connaissais'
                        ],
                        subjonctif: [
                            'sois', 'aies', 'ailles', 'fasses', 'dises', 'puisses', 'voies', 'saches', 
                            'veuilles', 'viennes', 'prennes', 'mettes', 'doives', 'partes', 'tiennes',
                            'sortes', 'sentes', 'vives', 'meures', 'ouvres', 'suives', 'coures',
                            'serves', 'dormes', 'mentes', 'croies', 'boives', 'lises', '√©crives', 'connaisses'
                        ],
                        conditionnel: [
                            'serais', 'aurais', 'irais', 'ferais', 'dirais', 'pourrais', 'verrais', 'saurais', 
                            'voudrais', 'viendrais', 'prendrais', 'mettrais', 'devrais', 'partirais', 'tiendrais',
                            'sortirais', 'sentirais', 'vivrais', 'mourrais', 'ouvrirais', 'suivrais', 'courrais',
                            'servirais', 'dormirais', 'mentirais', 'croirais', 'boirais', 'lirais', '√©crirais', 'conna√Ætrais'
                        ]
                    },
                    motsDivers: [
                        // Verbes r√©guliers infinitifs
                        'parler', 'aimer', 'donner', 'porter', 'arriver', 'rester', 'entrer', 'montrer',
                        'passer', 'regarder', 'trouver', 'appeler', 'demander', 'garder', 'attendre',
                        'chanter', 'danser', 'jouer', 'manger', 'travailler', '√©tudier', 'marcher',
                        'chercher', '√©couter', 'habiter', 'finir', 'choisir', 'r√©ussir', 'grandir',
                        // Participes pass√©s r√©guliers
                        'parl√©', 'aim√©', 'donn√©', 'port√©', 'arriv√©', 'rest√©', 'entr√©', 'montr√©',
                        'pass√©', 'regard√©', 'trouv√©', 'appel√©', 'demand√©', 'gard√©', 'attendu',
                        'chant√©', 'dans√©', 'jou√©', 'mang√©', 'travaill√©', '√©tudi√©', 'march√©',
                        'cherch√©', '√©cout√©', 'habit√©', 'fini', 'choisi', 'r√©ussi', 'grandi',
                        // Conditionnels r√©guliers
                        'parlerais', 'aimerais', 'donnerais', 'porterais', 'arriverais', 'resterais', 'entrerais', 'montrerais',
                        'passerais', 'regarderais', 'trouverais', 'appellerais', 'demanderais', 'garderais', 'attendrais',
                        'chanterais', 'danserais', 'jouerais', 'mangerais', 'travaillerais', '√©tudierais', 'marcherais',
                        'chercherais', '√©couterais', 'habiterais', 'finirais', 'choisirais', 'r√©ussirais', 'grandirais'
                    ]
                };
                console.log('üìä Donn√©es fallback enrichies charg√©es - Mode autonome confirm√©');
                this.currentVerbs = [];
                this.isDataLoaded = true; // FORCE √† true
                
                // Stats de jeu
                this.score = 0;
                this.level = 1;
                this.lives = 5;
                this.maxLives = 5;
                this.verbsSliced = 0;
                this.totalClicks = 0;
                this.correctClicks = 0;
                this.currentStreak = 0;
                this.bestStreak = 0;
                this.gameStartTime = 0;
                this.gameTime = 0;
                
                console.log('üéÆ Stats initiales:', {
                    lives: this.lives,
                    maxLives: this.maxLives,
                    score: this.score
                });
                
                // Param√®tres de jeu
                this.gameSpeed = 60;
                this.spawnRate = 0.03;
                this.wordSpeed = 1;
                this.maxWords = 8;
                this.lastSpawnTime = 0;
                this.spawnInterval = 1000;
                
                // NOUVEAU : Syst√®me de timing pour les verbes irr√©guliers
                this.minIrregularInterval = 3000; // 3 secondes minimum entre verbes irr√©guliers
                this.lastIrregularSpawnTime = 0;
                
                // NOUVEAU : Syst√®me de leaderboard
                this.leaderboardData = [];
                this.currentPlayerScore = null;
                this.previousScreen = 'start-screen'; // Pour revenir au bon √©cran depuis le leaderboard
                
                // Niveaux - SEUILS AJUST√âS POUR PROGRESSION PLUS RAPIDE
                this.levels = [
                    { name: 'Infinitifs', threshold: 0, verbType: 'infinitif', color: '#3498db' },
                    { name: 'Participes pass√©s', threshold: 10, verbType: 'participe_passe', color: '#9b59b6' },
                    { name: 'Futur', threshold: 25, verbType: 'futur', color: '#e67e22' },
                    { name: 'Imparfait', threshold: 45, verbType: 'imparfait', color: '#e74c3c' },
                    { name: 'Subjonctif', threshold: 70, verbType: 'subjonctif', color: '#f39c12' },
                    { name: 'Conditionnel', threshold: 100, verbType: 'conditionnel', color: '#8e44ad' }
                ];
                
                this.difficultySettings = {
                    facile: { speedMultiplier: 0.8, spawnMultiplier: 0.8, maxWords: 5 },
                    normal: { speedMultiplier: 1.0, spawnMultiplier: 1.0, maxWords: 10 },
                    difficile: { speedMultiplier: 2, spawnMultiplier: 2, maxWords: 20 }
                };
                
                // Effets visuels
                this.fallingWords = [];
                this.particles = [];
                this.floatingTexts = [];
                this.sliceEffects = [];
                
                this.init();
            }
            
            async init() {
                try {
                                    this.setupEventListeners();
                
                this.initializeCurrentVerbs();
                
                this.setupCanvas();
                
                // NOUVEAU : Charger le leaderboard au d√©marrage
                this.loadLeaderboard();
                
                console.log('‚úÖ Verbe Slicer Simple initialis√© !');
            } catch (error) {
                console.error('‚ùå Erreur:', error);
            }
        }
            
            setupEventListeners() {
                const startBtn = document.getElementById('start-game-btn');
                const mainLeaderboardBtn = document.getElementById('main-leaderboard-btn');
                if (startBtn) {
                    startBtn.addEventListener('click', () => this.startGame());
                }
                if (mainLeaderboardBtn) {
                    mainLeaderboardBtn.addEventListener('click', () => this.showLeaderboard());
                }
                
                const difficultyBtns = document.querySelectorAll('.difficulty-btn');
                difficultyBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
                        e.target.closest('.difficulty-btn').classList.add('active');
                        this.difficulty = e.target.closest('.difficulty-btn').dataset.difficulty;
                    });
                });
                
                const pauseBtn = document.getElementById('pause-btn');
                const resumeBtn = document.getElementById('resume-btn');
                const restartBtn = document.getElementById('restart-btn');
                const quitBtn = document.getElementById('quit-btn');
                const playAgainBtn = document.getElementById('play-again-btn');
                const backToMenuBtn = document.getElementById('back-to-menu-btn');
                const menuGamesBtn = document.getElementById('menu-games-btn');
                
                // NOUVEAUX : Boutons leaderboard
                const leaderboardBtn = document.getElementById('leaderboard-btn');
                const saveScoreBtn = document.getElementById('save-score-btn');
                const closeLeaderboardBtn = document.getElementById('close-leaderboard-btn');
                
                // NOUVEAUX : Onglets menu pause
                const statsTab = document.getElementById('stats-tab');
                const rulesTab = document.getElementById('rules-tab');
                
                if (pauseBtn) pauseBtn.addEventListener('click', () => this.togglePause());
                if (resumeBtn) resumeBtn.addEventListener('click', () => this.togglePause());
                if (restartBtn) restartBtn.addEventListener('click', () => this.startGame());
                if (quitBtn) quitBtn.addEventListener('click', () => this.quitToMenu());
                if (playAgainBtn) playAgainBtn.addEventListener('click', () => this.startGame());
                if (backToMenuBtn) backToMenuBtn.addEventListener('click', () => this.quitToMenu());
                if (menuGamesBtn) menuGamesBtn.addEventListener('click', () => this.goToGamesMenu());
                
                // NOUVEAUX : Event listeners leaderboard
                if (leaderboardBtn) leaderboardBtn.addEventListener('click', () => this.showLeaderboard());
                if (saveScoreBtn) saveScoreBtn.addEventListener('click', () => this.savePlayerScore());
                if (closeLeaderboardBtn) closeLeaderboardBtn.addEventListener('click', () => this.closeLeaderboard());
                
                // NOUVEAUX : Event listeners onglets
                if (statsTab) statsTab.addEventListener('click', () => this.switchTab('stats'));
                if (rulesTab) rulesTab.addEventListener('click', () => this.switchTab('rules'));
                
                // NOUVEAU : Event listener pour la saisie du pseudo (Entr√©e pour valider)
                const pseudoInput = document.getElementById('player-pseudo');
                if (pseudoInput) {
                    pseudoInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.savePlayerScore();
                        }
                    });
                }
                
                document.addEventListener('keydown', (e) => {
                    switch(e.code) {
                        case 'Space':
                            e.preventDefault();
                            if (this.gameState === 'playing' || this.gameState === 'paused') {
                                this.togglePause();
                            }
                            break;
                        case 'KeyR':
                            if (this.gameState === 'playing' || this.gameState === 'paused') {
                                this.startGame();
                            }
                            break;
                    }
                });
            }
            
            initializeCurrentVerbs() {
                const currentLevel = this.getCurrentLevel();
                const irregularVerbs = this.verbesData.verbesIrreguliers[currentLevel.verbType] || [];
                const regularWords = this.verbesData.motsDivers || [];
                this.currentVerbs = [...irregularVerbs, ...regularWords];
                
                // V√âRIFICATION que nous utilisons bien les donn√©es fallback
                console.log(` Verbes initialis√©s: ${this.currentVerbs.length} mots`);
                console.log(` Niveau ${currentLevel.name} (${currentLevel.verbType}):`);
                console.log(`  - ${irregularVerbs.length} verbes irr√©guliers: ${irregularVerbs.slice(0, 5).join(', ')}...`);
                console.log(`  - ${regularWords.length} mots r√©guliers: ${regularWords.slice(0, 5).join(', ')}...`);
                console.log('üîí SOURCE: Donn√©es fallback int√©gr√©es (autonome)');
            }
            
            setupCanvas() {
                this.canvas = document.getElementById('game-canvas');
                if (!this.canvas) {
                    throw new Error('Canvas non trouv√©');
                }
                
                this.ctx = this.canvas.getContext('2d');
                this.resizeCanvas();
                
                window.addEventListener('resize', () => this.resizeCanvas());
                this.canvas.addEventListener('click', (e) => this.handleClick(e));
            }
            
            resizeCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            startGame() {
                console.log('üöÄ D√©marrage du jeu...');
                
                console.log('üîç √âtat avant reset:', {
                    lives: this.lives,
                    maxLives: this.maxLives,
                    gameState: this.gameState
                });
                
                this.resetGameStats();
                
                console.log('üîç √âtat apr√®s reset:', {
                    lives: this.lives,
                    maxLives: this.maxLives,
                    gameState: this.gameState
                });
                
                this.initializeCurrentVerbs();
                this.gameState = 'playing';
                this.gameStartTime = Date.now();
                this.lastSpawnTime = Date.now();
                
                console.log('üîç √âtat final avant showScreen:', {
                    lives: this.lives,
                    gameState: this.gameState,
                    currentVerbs: this.currentVerbs.length
                });
                
                this.showScreen('game-screen');
                
                console.log('üîÑ Lancement gameLoop...');
                this.gameLoop();
            }
            
            resetGameStats() {
                console.log('üîÑ R√©initialisation des stats...');
                this.score = 0;
                this.level = 1;
                this.lives = this.maxLives; // Assurer que maxLives est bien d√©fini
                this.verbsSliced = 0;
                this.totalClicks = 0;
                this.correctClicks = 0;
                this.currentStreak = 0;
                this.bestStreak = 0;
                this.fallingWords = [];
                this.particles = [];
                this.floatingTexts = [];
                this.sliceEffects = [];
                
                console.log('üîÑ Vies apr√®s reset:', this.lives, 'maxLives:', this.maxLives);
                
                const settings = this.difficultySettings[this.difficulty];
                this.wordSpeed = 1 * settings.speedMultiplier;
                this.spawnRate = 0.02 * settings.spawnMultiplier;
                this.maxWords = settings.maxWords;
                this.spawnInterval = 1000 / settings.spawnMultiplier;
                
                console.log('üéöÔ∏è Param√®tres difficult√©:', this.difficulty, settings);
                
                this.updateUI();
            }
            
            getCurrentLevel() {
                for (let i = this.levels.length - 1; i >= 0; i--) {
                    if (this.score >= this.levels[i].threshold) {
                        return this.levels[i];
                    }
                }
                return this.levels[0];
            }
            
            gameLoop() {
                if (this.gameState !== 'playing') return;
                
                this.update();
                this.render();
                
                requestAnimationFrame(() => this.gameLoop());
            }
            
            update() {
                this.gameTime = Date.now() - this.gameStartTime;
                
                // DEBUG: V√©rifier les vies
                if (this.lives <= 0) {
                    console.log('‚ùå Game Over d√©tect√©, vies:', this.lives);
                    this.gameOver();
                    return;
                }
                
                // Spawn de nouveaux mots
                const now = Date.now();
                if (now - this.lastSpawnTime > this.spawnInterval && this.fallingWords.length < this.maxWords) {
                    this.spawnWord();
                    this.lastSpawnTime = now;
                }
                
                // Mise √† jour des mots qui tombent
                this.updateFallingWords();
                this.updateParticles();
                this.updateFloatingTexts();
            }
            
            spawnWord() {
                if (this.currentVerbs.length === 0) return;
                
                const now = Date.now();
                let word, isIrregular;
                let attempts = 0;
                const maxWordAttempts = 20;
                
                // NOUVEAU : Syst√®me de timing pour les verbes irr√©guliers
                do {
                    word = this.currentVerbs[Math.floor(Math.random() * this.currentVerbs.length)];
                    isIrregular = this.isIrregularVerb(word);
                    attempts++;
                    
                    // Si c'est un verbe irr√©gulier, v√©rifier le timing
                    if (isIrregular) {
                        const timeSinceLastIrregular = now - this.lastIrregularSpawnTime;
                        if (timeSinceLastIrregular < this.minIrregularInterval) {
                            // Trop t√¥t pour un verbe irr√©gulier, essayer un autre mot
                            console.log(`‚è∞ Verbe irr√©gulier "${word}" rejet√© - d√©lai minimum non respect√© (${timeSinceLastIrregular}ms < ${this.minIrregularInterval}ms)`);
                            continue;
                        }
                    }
                    
                    // Mot valide trouv√©
                    break;
                    
                } while (attempts < maxWordAttempts);
                
                // Si on n'a pas trouv√© de mot valide, prendre un mot r√©gulier
                if (attempts >= maxWordAttempts) {
                    const regularWords = this.currentVerbs.filter(w => !this.isIrregularVerb(w));
                    if (regularWords.length > 0) {
                        word = regularWords[Math.floor(Math.random() * regularWords.length)];
                        isIrregular = false;
                        console.log(`üîÑ Fallback vers mot r√©gulier: "${word}"`);
                    } else {
                        console.log(`‚ö†Ô∏è Aucun mot valide trouv√© apr√®s ${maxWordAttempts} tentatives`);
                        return;
                    }
                }
                
                // Enregistrer le timestamp si c'est un verbe irr√©gulier
                if (isIrregular) {
                    this.lastIrregularSpawnTime = now;
                    console.log(`üìù Timestamp verbe irr√©gulier enregistr√©: ${now}`);
                }
                
                const currentLevel = this.getCurrentLevel();
                
                // AM√âLIORATION : √âviter les spawns trop proches d√®s le d√©part
                let attemptCount = 0;
                let spawnX, spawnY;
                const maxAttempts = 10;
                const minDistanceFromOthers = 80; // Distance minimale avec les autres mots
                
                do {
                    spawnX = Math.random() * (this.canvas.width - 200) + 100;
                    spawnY = -50;
                    attemptCount++;
                    
                    // V√©rifier la distance avec les autres mots existants
                    let tooClose = false;
                    for (let existingWord of this.fallingWords) {
                        const distance = Math.sqrt(
                            Math.pow(spawnX - existingWord.x, 2) + 
                            Math.pow(spawnY - existingWord.y, 2)
                        );
                        if (distance < minDistanceFromOthers) {
                            tooClose = true;
                            break;
                        }
                    }
                    
                    if (!tooClose) break; // Position valide trouv√©e
                    
                } while (attemptCount < maxAttempts);
                
                // COULEURS UNIFORMIS√âES - Plus de distinction visuelle
                let wordColor = currentLevel.color || '#ffffff'; // Couleur uniforme bas√©e sur le niveau
                
                this.fallingWords.push({
                    text: word,
                    x: spawnX,
                    y: spawnY,
                    speed: this.wordSpeed + Math.random() * 0.5,
                    isIrregular: isIrregular,
                    color: wordColor, // Couleur uniforme
                    rotation: 0,
                    rotationSpeed: (Math.random() - 0.5) * 0.02
                });
                
                console.log(`‚ú® Mot spawn√©: "${word}" (${isIrregular ? 'irr√©gulier' : 'r√©gulier'}) √† (${Math.round(spawnX)}, ${Math.round(spawnY)}), tentatives: ${attemptCount} - Couleur uniforme: ${wordColor}`);
            }
            
            isIrregularVerb(word) {
                return Object.values(this.verbesData.verbesIrreguliers).some(verbs => 
                    verbs.includes(word)
                );
            }
            
            updateFallingWords() {
                this.fallingWords.forEach((word, index) => {
                    word.y += word.speed;
                    word.rotation += word.rotationSpeed;
                    
                    // NOUVEAU : Syst√®me de r√©pulsion entre les mots pour √©viter les superpositions
                    this.applyRepulsionForces(word, index);
                    
                    if (word.y > this.canvas.height + 50) {
                        this.fallingWords.splice(index, 1);
                        if (word.isIrregular) {
                            console.log('üíî Verbe irr√©gulier rat√©:', word.text, 'Vies avant:', this.lives);
                            this.loseLife();
                            console.log('üíî Vies apr√®s:', this.lives);
                        }
                    }
                });
            }
            
            // NOUVELLE FONCTION : Syst√®me de r√©pulsion pour √©viter les collisions
            applyRepulsionForces(currentWord, currentIndex) {
                const repulsionRadius = 60; // Distance minimale entre les mots
                const repulsionStrength = 0.5; // Force de r√©pulsion
                
                this.fallingWords.forEach((otherWord, otherIndex) => {
                    if (currentIndex === otherIndex) return; // Ne pas se repousser soi-m√™me
                    
                    // Calculer la distance entre les deux mots
                    const dx = currentWord.x - otherWord.x;
                    const dy = currentWord.y - otherWord.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    // Si les mots sont trop proches, appliquer une force de r√©pulsion
                    if (distance < repulsionRadius && distance > 0) {
                        // Calculer la force de r√©pulsion normalis√©e
                        const forceX = (dx / distance) * repulsionStrength;
                        const forceY = (dy / distance) * repulsionStrength;
                        
                        // Appliquer la force - les verbes irr√©guliers ont la priorit√©
                        if (currentWord.isIrregular && !otherWord.isIrregular) {
                            // Le verbe irr√©gulier repousse le verbe r√©gulier
                            otherWord.x -= forceX * 2;
                            otherWord.y -= forceY * 0.5; // Moins de force verticale pour ne pas trop perturber la chute
                        } else if (!currentWord.isIrregular && otherWord.isIrregular) {
                            // Le verbe r√©gulier s'√©carte du verbe irr√©gulier
                            currentWord.x += forceX * 2;
                            currentWord.y += forceY * 0.5;
                        } else {
                            // R√©pulsion mutuelle normale
                            currentWord.x += forceX;
                            otherWord.x -= forceX;
                            // Moins de force verticale pour maintenir la chute naturelle
                            currentWord.y += forceY * 0.3;
                            otherWord.y -= forceY * 0.3;
                        }
                        
                        // S'assurer que les mots restent dans les limites de l'√©cran
                        const margin = 50;
                        currentWord.x = Math.max(margin, Math.min(this.canvas.width - margin, currentWord.x));
                        otherWord.x = Math.max(margin, Math.min(this.canvas.width - margin, otherWord.x));
                    }
                });
            }
            
            handleClick(event) {
                if (this.gameState !== 'playing') return;
                
                const rect = this.canvas.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                
                this.totalClicks++;
                
                // AM√âLIORATION MAJEURE : Prioriser les verbes irr√©guliers lors des clics
                // Cr√©er deux listes : verbes irr√©guliers et r√©guliers
                const irregularWords = [];
                const regularWords = [];
                
                this.fallingWords.forEach((word, index) => {
                    if (this.isPointInWord(x, y, word)) {
                        if (word.isIrregular) {
                            irregularWords.push({ word, index });
                        } else {
                            regularWords.push({ word, index });
                        }
                    }
                });
                
                // PRIORIT√â AUX VERBES IRR√âGULIERS : si on peut cliquer sur les deux types,
                // on privil√©gie toujours le verbe irr√©gulier
                let targetWord = null;
                let targetIndex = -1;
                let hit = false;
                
                if (irregularWords.length > 0) {
                    // Prendre le premier verbe irr√©gulier trouv√©
                    targetWord = irregularWords[0].word;
                    targetIndex = irregularWords[0].index;
                    hit = true;
                    console.log('üéØ Priorit√© donn√©e au verbe irr√©gulier:', targetWord.text);
                } else if (regularWords.length > 0) {
                    // Sinon prendre le premier verbe r√©gulier
                    targetWord = regularWords[0].word;
                    targetIndex = regularWords[0].index;
                    hit = true;
                    console.log('üéØ Clic sur verbe r√©gulier:', targetWord.text);
                }
                
                if (hit && targetWord && targetIndex >= 0) {
                    this.handleWordClick(targetWord, targetIndex);
                } else {
                    console.log('‚ùå Clic dans le vide');
                }
            }
            
            isPointInWord(x, y, word) {
                this.ctx.font = '30px Arial';
                const metrics = this.ctx.measureText(word.text);
                const wordWidth = metrics.width;
                const wordHeight = 30;
                
                // CORRECTION MAJEURE : Zones cliquables BEAUCOUP plus grandes pour mobile et desktop
                // Augmentation massive des zones de s√©curit√©
                const extraWidthPadding = 80; // 40px de chaque c√¥t√© (doubl√©)
                const extraHeightPadding = 60; // 30px au-dessus et en-dessous (doubl√©)
                const minClickableWidth = 120; // Largeur minimale augment√©e
                const minClickableHeight = 80; // Hauteur minimale augment√©e
                
                // Calculer les dimensions finales avec padding massif
                const finalWidth = Math.max(wordWidth + extraWidthPadding, minClickableWidth);
                const finalHeight = Math.max(wordHeight + extraHeightPadding, minClickableHeight);
                
                return x >= word.x - finalWidth/2 && 
                       x <= word.x + finalWidth/2 && 
                       y >= word.y - finalHeight/2 && 
                       y <= word.y + finalHeight/2;
            }
            
            handleWordClick(word, index) {
                this.totalClicks++;
                this.fallingWords.splice(index, 1);
                
                if (word.isIrregular) {
                    // Bon clic sur verbe irr√©gulier
                    this.score++;
                    this.verbsSliced++;
                    this.correctClicks++;
                    this.currentStreak++;
                    this.bestStreak = Math.max(this.bestStreak, this.currentStreak);
                    
                    // R√©cup√©ration d'un coeur et affichage du texte combin√©
                    let mainText = '+1';
                    if (this.lives < this.maxLives) {
                        this.lives++;
                        mainText = '+1 ‚ù§Ô∏è'; // Combiner les deux messages en un seul
                        console.log('üíö Coeur r√©cup√©r√© ! Vies actuelles:', this.lives);
                    }
                    
                    // Un seul texte flottant
                    this.addFloatingText(word.x, word.y, mainText, 'success');
                    console.log('‚úÖ Verbe irr√©gulier tranch√©:', word.text, 'Score:', this.score);
                    
                    // V√©rifier changement de niveau
                    this.checkLevelUp();
                } else {
                    // Mauvais clic sur verbe r√©gulier
                    this.currentStreak = 0;
                    this.loseLife();
                    this.addFloatingText(word.x, word.y, 'Erreur !', 'error');
                    console.log('‚ùå Erreur: verbe r√©gulier cliqu√©:', word.text, 'Vies restantes:', this.lives);
                }
                
                this.updateUI();
            }
            
            checkLevelUp() {
                const previousLevel = this.level;
                const currentLevel = this.getCurrentLevel();
                const newLevel = this.levels.indexOf(currentLevel) + 1;
                
                if (newLevel > this.level) {
                    this.level = newLevel;
                    this.initializeCurrentVerbs(); // Recharger les verbes pour le nouveau niveau
                    
                    console.log('üî• NIVEAU UP !', {
                        previousLevel,
                        newLevel: this.level,
                        currentLevelName: currentLevel.name,
                        score: this.score
                    });
                    
                    // Affichage visuel du niveau up
                    this.showLevelUpEffect();
                }
            }
            
            showLevelUpEffect() {
                const currentLevel = this.getCurrentLevel();
                
                // Cr√©er l'effet de niveau up
                const effectElement = document.createElement('div');
                effectElement.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: linear-gradient(135deg, ${currentLevel.color}, #ffd700);
                        color: white;
                        padding: 30px 50px;
                        border-radius: 20px;
                        font-size: 2rem;
                        font-weight: bold;
                        text-align: center;
                        z-index: 10000;
                        animation: levelUpPulse 2s ease-out;
                        box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
                        border: 3px solid #ffd700;
                    ">
                        üéâ NIVEAU ${this.level} üéâ<br>
                        <span style="font-size: 1.2rem; color: #fff;">${currentLevel.name}</span>
                    </div>
                `;
                
                // Ajouter l'animation CSS temporairement
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes levelUpPulse {
                        0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
                        50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
                        100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
                document.body.appendChild(effectElement);
                
                // Supprimer l'effet apr√®s l'animation
                setTimeout(() => {
                    document.body.removeChild(effectElement);
                    document.head.removeChild(style);
                }, 2000);
            }
            
            loseLife() {
                this.lives--;
                console.log('üíî Vie perdue, vies restantes:', this.lives);
                this.updateLivesDisplay();
                if (this.lives <= 0) {
                    console.log('üíÄ Plus de vies, Game Over');
                    this.gameOver();
                }
            }
            
            addFloatingText(x, y, text, type) {
                this.floatingTexts.push({
                    x: x, y: y, text: text, type: type,
                    life: 1, decay: 0.015, vy: -2
                });
            }
            
            updateParticles() {
                this.particles.forEach((particle, index) => {
                    particle.life -= particle.decay;
                    if (particle.life <= 0) {
                        this.particles.splice(index, 1);
                    }
                });
            }
            
            updateFloatingTexts() {
                this.floatingTexts.forEach((text, index) => {
                    text.y += text.vy;
                    text.life -= text.decay;
                    if (text.life <= 0) {
                        this.floatingTexts.splice(index, 1);
                    }
                });
            }
            
            render() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.renderFallingWords();
                this.renderFloatingTexts();
            }
            
            renderFallingWords() {
                this.fallingWords.forEach(word => {
                    this.ctx.save();
                    this.ctx.translate(word.x, word.y);
                    this.ctx.rotate(word.rotation);
                    
                    // Ombre port√©e uniforme
                    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                    this.ctx.font = 'bold 30px Arial';
                    this.ctx.textAlign = 'center';
                    this.ctx.fillText(word.text, 2, 2);
                    
                    // Texte principal uniforme - PLUS DE DISTINCTION VISUELLE
                    this.ctx.fillStyle = word.color;
                    this.ctx.fillText(word.text, 0, 0);
                    
                    // SUPPRESSION de tous les effets visuels distinctifs
                    // Plus d'√©mojis, plus de halos, plus de bordures diff√©rentes
                    // Tous les mots ont la m√™me apparence pour augmenter la difficult√©
                    
                    this.ctx.restore();
                });
            }
            
            renderFloatingTexts() {
                this.floatingTexts.forEach(text => {
                    this.ctx.save();
                    this.ctx.globalAlpha = text.life;
                    this.ctx.font = 'bold 24px Arial';
                    this.ctx.textAlign = 'center';
                    
                    this.ctx.fillStyle = text.type === 'success' ? '#27ae60' : '#e74c3c';
                    this.ctx.strokeStyle = 'rgba(0, 0, 0, 0.5)';
                    this.ctx.lineWidth = 3;
                    this.ctx.strokeText(text.text, text.x, text.y);
                    this.ctx.fillText(text.text, text.x, text.y);
                    
                    this.ctx.restore();
                });
            }
            
            updateUI() {
                const scoreEl = document.getElementById('score');
                const levelEl = document.getElementById('level');
                const levelNameEl = document.getElementById('level-name');
                
                if (scoreEl) scoreEl.textContent = this.score;
                if (levelEl) levelEl.textContent = this.level;
                if (levelNameEl) levelNameEl.textContent = this.getCurrentLevel().name;
                
                this.updateLivesDisplay();
                this.updateProgressBar();
            }
            
            updateLivesDisplay() {
                const hearts = document.querySelectorAll('.heart');
                console.log('üíñ Mise √† jour affichage vies:', this.lives, 'coeurs trouv√©s:', hearts.length);
                hearts.forEach((heart, index) => {
                    if (index < this.lives) {
                        heart.classList.remove('lost');
                    } else {
                        heart.classList.add('lost');
                    }
                });
            }
            
            updateProgressBar() {
                const currentLevel = this.getCurrentLevel();
                const currentLevelIndex = this.levels.indexOf(currentLevel);
                const nextLevel = this.levels[currentLevelIndex + 1];
                
                if (nextLevel) {
                    const pointsInCurrentLevel = this.score - currentLevel.threshold;
                    const pointsNeededForNext = nextLevel.threshold - currentLevel.threshold;
                    const progressPercentage = Math.min((pointsInCurrentLevel / pointsNeededForNext) * 100, 100);
                    
                    const progressFill = document.getElementById('progress-fill');
                    const progressText = document.getElementById('progress-text');
                    
                    if (progressFill) {
                        progressFill.style.width = progressPercentage + '%';
                    }
                    
                    if (progressText) {
                        progressText.textContent = `${pointsInCurrentLevel} / ${pointsNeededForNext}`;
                    }
                    
                    console.log('üîÑ Progression mise √† jour:', {
                        currentLevel: currentLevel.name,
                        score: this.score,
                        pointsInCurrentLevel,
                        pointsNeededForNext,
                        percentage: progressPercentage.toFixed(1) + '%'
                    });
                } else {
                    // Niveau maximum atteint
                    const progressFill = document.getElementById('progress-fill');
                    const progressText = document.getElementById('progress-text');
                    
                    if (progressFill) {
                        progressFill.style.width = '100%';
                    }
                    
                    if (progressText) {
                        progressText.textContent = 'Niveau MAX';
                    }
                    
                    console.log('üèÜ Niveau maximum atteint !');
                }
            }
            
            togglePause() {
                if (this.gameState === 'playing') {
                    this.gameState = 'paused';
                    this.updatePauseStats();
                    this.showScreen('pause-screen');
                } else if (this.gameState === 'paused') {
                    this.gameState = 'playing';
                    this.showScreen('game-screen');
                    this.gameLoop();
                }
            }
            
            updatePauseStats() {
                const accuracy = this.totalClicks > 0 ? Math.round((this.correctClicks / this.totalClicks) * 100) : 100;
                
                // Mise √† jour des stats de pause
                const pauseScore = document.getElementById('pause-score');
                const pauseLevel = document.getElementById('pause-level');
                const pauseAccuracy = document.getElementById('pause-accuracy');
                const pauseProgress = document.getElementById('pause-progress');
                const pauseProgressText = document.getElementById('pause-progress-text');
                
                if (pauseScore) pauseScore.textContent = this.score;
                if (pauseLevel) pauseLevel.textContent = this.level;
                if (pauseAccuracy) pauseAccuracy.textContent = accuracy + '%';
                
                // Calcul de la progression
                const currentLevel = this.getCurrentLevel();
                const currentLevelIndex = this.levels.indexOf(currentLevel);
                const nextLevel = this.levels[currentLevelIndex + 1];
                
                if (nextLevel) {
                    const pointsInCurrentLevel = this.score - currentLevel.threshold;
                    const pointsNeededForNext = nextLevel.threshold - currentLevel.threshold;
                    const progressPercentage = Math.min((pointsInCurrentLevel / pointsNeededForNext) * 100, 100);
                    
                    if (pauseProgress) pauseProgress.textContent = Math.round(progressPercentage) + '%';
                    if (pauseProgressText) pauseProgressText.textContent = `${pointsInCurrentLevel} / ${pointsNeededForNext}`;
                } else {
                    if (pauseProgress) pauseProgress.textContent = '100%';
                    if (pauseProgressText) pauseProgressText.textContent = 'Niveau MAX';
                }
            }
            
            quitToMenu() {
                this.gameState = 'menu';
                this.showScreen('start-screen');
            }
            
            gameOver() {
                this.gameState = 'gameOver';
                this.updateFinalStats();
                this.showScreen('game-over-screen');
            }
            
            updateFinalStats() {
                const accuracy = this.totalClicks > 0 ? Math.round((this.correctClicks / this.totalClicks) * 100) : 100;
                const gameTimeSeconds = Math.floor(this.gameTime / 1000);
                const minutes = Math.floor(gameTimeSeconds / 60);
                const seconds = gameTimeSeconds % 60;
                
                document.getElementById('final-score').textContent = this.score;
                document.getElementById('final-level').textContent = this.level;
                document.getElementById('final-accuracy').textContent = accuracy + '%';
                document.getElementById('verbs-sliced').textContent = this.verbsSliced;
                document.getElementById('game-time').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('best-streak').textContent = this.bestStreak;
                
                // NOUVEAU : V√©rifier si c'est un record pour le leaderboard
                this.currentPlayerScore = {
                    score: this.score,
                    level: this.level,
                    accuracy: accuracy,
                    date: new Date().toISOString().split('T')[0],
                    difficulty: this.difficulty,
                    gameTime: `${minutes}:${seconds.toString().padStart(2, '0')}`,
                    verbsSliced: this.verbsSliced
                };
                
                this.checkForNewRecord();
            }
            
            // NOUVELLES FONCTIONS LEADERBOARD
            async loadLeaderboard() {
                try {
                    const response = await fetch('./leaderboard.json');
                    if (!response.ok) {
                        throw new Error('Erreur lors du chargement du leaderboard');
                    }
                    const data = await response.json();
                    this.leaderboardData = data.scores || [];
                    console.log('üìä Leaderboard charg√©:', this.leaderboardData.length, 'scores');
                } catch (error) {
                    console.warn('‚ö†Ô∏è Impossible de charger le leaderboard:', error);
                    // Donn√©es par d√©faut si le fichier n'existe pas
                    this.leaderboardData = [];
                }
            }
            
            checkForNewRecord() {
                this.loadLeaderboard().then(() => {
                    const isNewRecord = this.isNewRecord(this.currentPlayerScore.score);
                    const leaderboardInput = document.getElementById('leaderboard-input');
                    
                    if (isNewRecord && leaderboardInput) {
                        leaderboardInput.style.display = 'block';
                        console.log('üéâ Nouveau record d√©tect√© ! Score:', this.currentPlayerScore.score);
                    }
                });
            }
            
            isNewRecord(score) {
                // V√©rifier si le score m√©rite d'√™tre dans le top 10
                if (this.leaderboardData.length < 10) {
                    return true; // Moins de 10 scores, toujours accepter
                }
                
                // V√©rifier si le score est meilleur que le plus faible du top 10
                const lowestScore = Math.min(...this.leaderboardData.map(s => s.score));
                return score > lowestScore;
            }
            
            async savePlayerScore() {
                const pseudoInput = document.getElementById('player-pseudo');
                const pseudo = pseudoInput.value.trim();
                
                if (!pseudo) {
                    alert('Veuillez entrer un pseudo !');
                    return;
                }
                
                if (pseudo.length > 15) {
                    alert('Le pseudo ne peut pas d√©passer 15 caract√®res !');
                    return;
                }
                
                // Ajouter le pseudo au score actuel
                this.currentPlayerScore.pseudo = pseudo;
                
                // Ajouter le nouveau score
                this.leaderboardData.push(this.currentPlayerScore);
                
                // Trier par score d√©croissant
                this.leaderboardData.sort((a, b) => b.score - a.score);
                
                // Garder seulement le top 10
                this.leaderboardData = this.leaderboardData.slice(0, 10);
                
                try {
                    // Sauvegarder dans le localStorage comme fallback
                    localStorage.setItem('verbe-slicer-leaderboard', JSON.stringify(this.leaderboardData));
                    console.log('üíæ Score sauvegard√© dans localStorage');
                    
                    // Cacher l'input et afficher un message de confirmation
                    const leaderboardInput = document.getElementById('leaderboard-input');
                    if (leaderboardInput) {
                        leaderboardInput.style.display = 'none';
                    }
                    
                    // Afficher une notification
                    alert(`üéâ Score enregistr√© ! F√©licitations ${pseudo} !`);
                    
                } catch (error) {
                    console.error('‚ùå Erreur lors de la sauvegarde:', error);
                    alert('Erreur lors de la sauvegarde du score');
                }
            }
            
            showLeaderboard() {
                // Enregistrer l'√©cran actuel pour pouvoir y revenir
                if (this.gameState === 'gameOver') {
                    this.previousScreen = 'game-over-screen';
                } else {
                    this.previousScreen = 'start-screen';
                }
                
                this.loadLeaderboard().then(() => {
                    this.displayLeaderboard();
                    this.showScreen('leaderboard-screen');
                });
            }
            
            displayLeaderboard() {
                const leaderboardList = document.getElementById('leaderboard-list');
                if (!leaderboardList) return;
                
                // Charger du localStorage si disponible
                const savedScores = localStorage.getItem('verbe-slicer-leaderboard');
                if (savedScores) {
                    try {
                        const parsedScores = JSON.parse(savedScores);
                        // Fusionner avec les scores existants
                        const allScores = [...this.leaderboardData, ...parsedScores];
                        // Supprimer les doublons et trier
                        const uniqueScores = allScores.filter((score, index, arr) => 
                            arr.findIndex(s => s.pseudo === score.pseudo && s.score === score.score) === index
                        );
                        uniqueScores.sort((a, b) => b.score - a.score);
                        this.leaderboardData = uniqueScores.slice(0, 10);
                    } catch (error) {
                        console.warn('‚ö†Ô∏è Erreur lors du parsing du localStorage:', error);
                    }
                }
                
                if (this.leaderboardData.length === 0) {
                    leaderboardList.innerHTML = '<p style="color: #888; padding: 20px;">Aucun score enregistr√© pour le moment.<br>Soyez le premier √† √©tablir un record !</p>';
                    return;
                }
                
                let html = '';
                this.leaderboardData.forEach((scoreData, index) => {
                    const rank = index + 1;
                    const rankClass = rank === 1 ? 'first' : rank === 2 ? 'second' : rank === 3 ? 'third' : '';
                    const isCurrentPlayer = this.currentPlayerScore && 
                                          scoreData.pseudo === this.currentPlayerScore.pseudo && 
                                          scoreData.score === this.currentPlayerScore.score;
                    
                    html += `
                        <div class="leaderboard-item ${isCurrentPlayer ? 'current-player' : ''}">
                            <div class="leaderboard-rank ${rankClass}">${rank}</div>
                            <div class="leaderboard-info">
                                <div class="leaderboard-pseudo">${scoreData.pseudo}</div>
                                <div class="leaderboard-details">
                                    Niveau ${scoreData.level} ‚Ä¢ ${scoreData.accuracy}% pr√©cision ‚Ä¢ ${scoreData.difficulty}
                                    <br><small>${scoreData.date}</small>
                                </div>
                            </div>
                            <div class="leaderboard-score">${scoreData.score}</div>
                        </div>
                    `;
                });
                
                leaderboardList.innerHTML = html;
            }
            
            closeLeaderboard() {
                this.showScreen(this.previousScreen);
            }
            
            // NOUVELLES FONCTIONS ONGLETS MENU PAUSE
            switchTab(tabName) {
                // Supprimer la classe active de tous les onglets et contenus
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Activer l'onglet et le contenu s√©lectionn√©s
                const selectedTab = document.querySelector(`[data-tab="${tabName}"]`);
                const selectedContent = document.getElementById(`${tabName}-content`);
                
                if (selectedTab) selectedTab.classList.add('active');
                if (selectedContent) selectedContent.classList.add('active');
                
                console.log('üìë Onglet chang√© vers:', tabName);
            }
            
            showScreen(screenId) {
                console.log('üñ•Ô∏è Changement d\'√©cran vers:', screenId);
                
                const screens = document.querySelectorAll('.game-screen');
                console.log('üñ•Ô∏è √âcrans trouv√©s:', screens.length);
                
                // Masquer tous les √©crans
                screens.forEach(screen => {
                    screen.classList.remove('active');
                    screen.style.display = 'none'; // Force masquage
                    screen.style.opacity = '0'; // Force opacit√© 0
                    console.log('üì∫ Masquage:', screen.id);
                });
                
                // Afficher l'√©cran cible
                const targetScreen = document.getElementById(screenId);
                if (targetScreen) {
                    targetScreen.classList.add('active');
                    
                    // Force l'affichage selon le type d'√©cran
                    if (targetScreen.classList.contains('overlay')) {
                        targetScreen.style.display = 'flex';
                        console.log('üîç √âcran overlay affich√© en flex:', screenId);
                    } else {
                        targetScreen.style.display = 'block';
                        console.log('üîç √âcran normal affich√© en block:', screenId);
                    }
                    
                    // CORRECTION CRITIQUE: Force l'opacit√© √† 1
                    targetScreen.style.opacity = '1 !important';
                    targetScreen.style.visibility = 'visible !important';
                    
                    console.log('‚úÖ √âcran affich√©:', screenId);
                    
                    // V√©rification suppl√©mentaire avec double contr√¥le
                    setTimeout(() => {
                        const computedStyle = window.getComputedStyle(targetScreen);
                        console.log('üé® Style calcul√© pour', screenId, ':', {
                            display: computedStyle.display,
                            visibility: computedStyle.visibility,
                            opacity: computedStyle.opacity
                        });
                        
                        // Double v√©rification - forcer encore si n√©cessaire
                        if (parseFloat(computedStyle.opacity) < 0.9) {
                            console.log('‚ö†Ô∏è Opacit√© faible d√©tect√©e, correction forc√©e');
                            targetScreen.style.setProperty('opacity', '1', 'important');
                            targetScreen.style.setProperty('visibility', 'visible', 'important');
                            targetScreen.style.setProperty('display', targetScreen.classList.contains('overlay') ? 'flex' : 'block', 'important');
                        }
                    }, 100);
                } else {
                    console.error('‚ùå √âcran non trouv√©:', screenId);
                }
            }
            
            goToGamesMenu() {
                // Impl√©mentation de la fonction goToGamesMenu
                console.log('üéÆ Aller au menu des jeux');
            }
        }
        
        // Initialiser le jeu
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üìÑ DOM charg√©, initialisation...');
            const game = new VerbeSlicerSimple();
            window.game = game;
        });
    </script>
</body>
</html> 